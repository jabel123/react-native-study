# 리액트 이해하기

## state가 작동하는 방식과 중요성

상태는 컴포넌트가 다루는 값들의 집합체 입니다. 리액트에서는 UI를 state를 다루는 기계장치로 봅니다. 컴포넌트가 setState함수를 이용해서 state를 변경하게 되면 리액트는 컴포넌트를 다시 랜더링하게 됩니다. 

만일 자식 컴포넌트가 속성으로 부모 컴포넌트 상태를 받아서 사용하게 된다면 부모 컴포넌트의 상태가 변경되어 자식 컴포넌트 역시 모두 다시 렝더링하게 됩니다. 

생성자를 사용할 떄는 import문을 다음과같이 선언해 주어야 한다.

```
import React, {Component} from 'react'
````

상태는 this.setState()의 호출을 통해서 갱신됩니다. setState메서드는 이전 state의 내용과 새로운 state의 내용을 병합하는데, 단순히 새로운 key-value로 이루어진 객체를 전달하면 기존의 state가 유지하던 다른 내용들은 그대로 유지하고, 새로운 내용이 추가됩니다.
만약 this.state.[변수]를 이용하여 갱신을 하게되면 값은 갱신되지만 렌더링이 되지 않아 UI갱신은 일어나지 않게 된다.   

--- 
## props가 작동하는 방식과 중요성

props는 부모 컴포넌트로부터 전달된 속성값이거나, 컴포넌트가 상속받은 값입니다. 컴포넌트가 선언될 때 고정된 값이나 동적인 값일 수 있지만, 컴포넌트에 상속되고 나면 props는 변경이 불가능합니다. 다시말해서 최상위에서 선언되고 전달받은 초깃값을 변경해야만 props를 변경할 수 있습니다. 

props와 state간의 차이점, 유사저등의 비교  
|props|state|
|---|---|
|외부데이터|내부데이터|
|변경불가능|변경 가능|
|부모로부터 상속받는다.| 컴포넌트에서 생성된다.|
|부모컴포넌트가 변경할 수 있다.|컴포넌트에서만 갱신될 수 있다.|
|props로 전달받을 수 있다.|props로 전달받을수 있다.|
|컴포넌트 내부에서 변경할 수 없다.| 컴포넌트 내부에서 변경할 수 있다.|

```
1. state 변수를 선언
this.state = {
    book: 'React Native in Action'
}

2. state 변수를 갱신하는 setState를 작성
updateBook() {
    this.setState({
        book: 'Express in Action'
    })
}

3. 메서드와 state를 props로 자식 컴포넌트에 전달
<BookDisplay
    updateBook={() => this.updateBook()}
    book={this.state.book}/>

4. 메서드를 자식 컴포넌트에 있는 터치 핸들러에 연결
<Test onPress={this.props.updateBook}>
```

this.state와 this.props로 state와 props를 참조하면 반복적이 되면서 DRY원칙을 위배하게 됩니다. 이것을 피하려면 구조 분해 할당이 필요합니다. 구조분해 할당이란 자바스크립트의 새로운 특징으로 ES2015 스펙에 추가되었으며 리액트 네이티브 앱에서도 사용할 수 있습니다. 구조 분해 할당 개념은 간단하게 말해서 객체에서 속성들을 가져와서 앱에서 변수로 사용하라는 것입니다.

```
const person = {name: 'Jeff', age:'22'}
const { age } = person
````

## 리액트 컴포넌트 스펙 이해하기
리액트와 리액트 네이티브 컴포넌트를 만들 때 몇 가지 스펙과 생명주기를 연결해 컴포넌트가 수행하는 동작을 제어할 수 있습니다. 
컴포넌트 스펙은 기본적으로 컴포넌트의 생명주기 동안 일어나는 여러 상황에 대해 컴포넌트가 대응하는 방식을 제공합니다. 컴포넌트 스펙에는 다음과 같은 것이 있습니다.

### render 메서드  
컴포넌트가 생성될 떄 필수적으로 필요한 유일한 메서드로 이 메서드는 하나의 자식 요소나 null 혹은 false만을 반환합니다. 

### constructor 메서드
리액트 클래스는 다른 클래스를확장해서 만들어지기 때문에 생성자를 이용할 떄에는 반드시 super키워드를 this키워드 전에 사용해야만 합니다.
해당 메서드에서 보통 state의 초기화나 메서드 바인드등의 작업을 수행하게 됩니다. 

### statics 객체
클래스에서 사용할 수 있는 메서드를 정의할 때 사용


## 리액트 생명주기 메서드 구현하기 

다양한 메서드들이 컴포넌트 생명주기 동안 특정 시점에 실행됩니다. 이런 메서드를 생명주기 메서드라고 합니다. 이들 메서드는 컴포넌트의 생성과 소멸 동안 다른 시점에 개발자가 지정한 동작을 수행하기 때문에 작동 방식을 이해하는 것이 중요합니다. 

리액트 컴포넌트의 생명주기 세가지

**마운팅(생성)**
컴포넌트가 생성될 때 일련의 생명주기 메서드들이 호출되기 시작되고 개발자는 이들중 전부나 일부 메서드에 연결할 수 있는 옵션이 있습니다. 생성자와 getDerivedStateFromProps, render, componentDisMount 메서드들입니다. 앞에서 본 render 메서드가 이 시기에 속하며 UI 를 렌더링 합니다.

**갱신** 
컴포넌트가 갱신될 떄 갱신 관련 생명주기 메서드들이 호출되기 시작합니다.
- setState나 forceUpdate메서드가 컴포넌트 내에서 호출될 때
- 새 props가 컴포넌트로 전달될 때

**언마운팅** - 컴포넌트가 언마운팅될 때 최종 생명주기 메서드가 시작됩니다. 

---
## 정리
- 상태는 리액트 컴포넌트에서 데이터를 다루는 방식입니다. state를 갱신하면 컴포넌트의 UI와 state를 자신의 props로 사용하고 있는 자식 컴포넌트들이 다시 랜더링 됩니다.
- 속성(props)는 리액트 네이티브 앱에서 자식 컴포넌트로 데이터를 전달하는 방식입니다. props를 갱신하면 같은 props를 사용하는 컴포넌트는 모두 자동으로 갱신됩니다.
- 리액트 컴포넌트 스펙은 컴포넌트 선언을 명시한 리액트 컴포넌트의 메서드들과 속성(props)들입니다. render 메서드는 리액트 컴포넌트가 생성될 때 필요한 유일한 메서드입니다. 다른 메서드와 props는 모두 옵션입니다. 
- 리액트 컴포넌트의 생명주기는 세 시기: 생성(마운팅), 갱신, 파기(언마운팅)로 나눕니다. 각 시기는 고유한 생명주기 메서드 세트가 있습니다.
- 리액트 생명주기 메서드는 리액트 컴포넌트에서 사용할 수 있으며, 컴포넌트의 생명주기 동안 특정한 시점에서 실행됩니다. 이들 메서드는 컴포넌트가 기능하고 갱신하는 방식을 통제해 줍니다.